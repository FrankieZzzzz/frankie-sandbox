const ev_ctnr="div.t_events_wrap";var t_centre;jQuery(document).ready(function(n){function r(){i=t.scrollLeft}function u(){i!=t.scrollLeft&&f(200)}function s(){clearTimeout(e);e=setTimeout(()=>{f(150)},100)}let o=n(".t_event:first");o.addClass("selected");t_centre=window.innerWidth/2;n("div.t_event").on("click",function(){let t=n(this),f=n("div.t_event.selected");n(".t_event").removeClass("selected");t.addClass("selected");let i=n(ev_ctnr),e=f.offset().left,r=t.offset().left,u=r-e;u=r+t.outerWidth()/2-t_centre;i.animate({scrollLeft:i.scrollLeft()+u},200)});n(".t_nav a").on("click",function(){let t=n("div.t_event.selected");return n(this).hasClass("t_prev")?n("div.t_event:first").is(t)?void 0:(t.prev(".t_event").click(),!1):n(this).hasClass("t_next")?n("div.t_event:last").is(t)?void 0:(t.next(".t_event").click(),!1):void 0});n.fn.isInViewport=function(){var t=n(this).offset().top,r=t+n(this).outerHeight(),i=n(window).scrollTop(),u=i+n(window).height();return r>i&&t<u};n(document).keydown(function(t){if(n(ev_ctnr).isInViewport()){var i=[39,102],r=[37,100];let u=n("div.t_event.selected");if(r.includes(t.which))return n("div.t_event:first").is(u)?void 0:(u.prev(".t_event").click(),!1);if(i.includes(t.which))return n("div.t_event:last").is(u)?void 0:(u.next(".t_event").click(),!1)}});n(document).keyup(function(t){if(n(ev_ctnr).isInViewport()&&t.which==9){let t=n("div.t_event:focus");t.length>0&&t.click()}});let t=document.querySelector(ev_ctnr),i;t.addEventListener("mousedown",n=>r(n));t.addEventListener("mouseup",n=>u(n));t.addEventListener("touchstart",n=>r(n));t.addEventListener("touchend",n=>u(n));t.addEventListener("wheel",n=>s(n));var f=function(t){let u=n(ev_ctnr).scrollLeft(),f=u+t_centre;var r=-1,e,i;n("div.t_event").each(function(){let t=n(this),h=t.offset().left,o=u+h+t.outerWidth()/2,s=f-o;(r<0||Math.abs(s)<r)&&(r=Math.abs(s),e=o-f,i=t)});let o=n(ev_ctnr);if(o.animate({scrollLeft:o.scrollLeft()+e},t,function(){}),i.hasClass("selected"))return!1;setTimeout(()=>{n(".t_event").removeClass("selected"),i.addClass("selected")},200);n("div.timeline").fadeTo(300,.6,()=>{n("div.timeline").css("background-image",String.format("url({0})",i.data("bg"))),n("div.timeline").fadeTo(300,1)})},e=null});